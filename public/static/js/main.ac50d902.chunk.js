(this["webpackJsonpjetcake-project"]=this["webpackJsonpjetcake-project"]||[]).push([[0],{101:function(e,a,t){"use strict";t.d(a,"e",(function(){return l})),t.d(a,"c",(function(){return i})),t.d(a,"d",(function(){return o})),t.d(a,"a",(function(){return m})),t.d(a,"b",(function(){return u}));var n=t(20),r=t(36),s=t.n(r),c=t(69);s.a.defaults.baseURL=c.a.url;var l=function(e){return{type:n.e,payload:e}},i=function(e){return{type:n.c,payload:e}},o=function(e){return{type:n.d,payload:e}},m=function(e,a,t,r,s){return function(c){c({type:n.a,payload:{token:e,email:a}}),c(l(!!t)),c(i(!!r)),c(o(!!s))}},u=function(){return function(e,a){var t=a().user.token;console.log("logging out"),s.a.get("/users/logout",{headers:{Authorization:"Bearer ".concat(t)}}).then((function(a){e({type:n.b})}))}}},164:function(e,a,t){e.exports=t(324)},168:function(e,a,t){},169:function(e,a,t){},175:function(e,a,t){},176:function(e,a,t){},20:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"e",(function(){return r})),t.d(a,"c",(function(){return s})),t.d(a,"d",(function(){return c})),t.d(a,"b",(function(){return l}));var n="AUTHENTICATE_USER",r="SET_HAS_SECURITY",s="SET_HAS_ADDRESS",c="SET_HAS_PROFILE_PIC",l="LOG_OUT"},323:function(e,a,t){},324:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(46),c=t.n(s),l=(t(168),t(48)),i=t(19),o=(t(169),t(22)),m=t(72),u=t(24),d=t(96),E=t(156),f=t.n(E),p=t(69),b=t(93),h=t(157),g=t.n(h),N=t(47),O=t(20),w={key:"root",storage:f.a},j=Object(d.a)(w,Object(u.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isAuthenticated:!1,token:null,email:null,hasAddress:null,hasSecurity:null,hasProfilePic:null},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case O.a:return Object(N.a)({},e,{isAuthenticated:!0,token:a.payload.token,email:a.payload.email});case O.e:return Object(N.a)({},e,{hasSecurity:a.payload});case O.c:return Object(N.a)({},e,{hasAddress:a.payload});case O.d:return Object(N.a)({},e,{hasProfilePic:a.payload});case O.b:return Object(N.a)({},e,{isAuthenticated:!1,token:null,email:null,hasAddress:null,hasSecurity:null,hasProfilePic:null});default:return e}}})),v=function(){var e=[];e=Object(p.b)()?[].concat(Object(m.a)(e),[b.a]):[].concat(Object(m.a)(e),[b.a,g.a]);var a=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d;return Object(u.e)(j,a(u.a.apply(void 0,Object(m.a)(e))))}(),y=Object(d.b)(v),x=t(158),S=t(30),P=t(98),k=t(17),T=t(16),C=(t(175),t(176),t(91)),A=t.n(C),_=t(4),q=t(66),I=t(45),U=t(23),R=t(14),L=t(7),B=t(11),D=t(36),z=t.n(D);function G(e){var a=e.setContainer,t=e.authenticate,s=(e.checkUser,Object(n.useState)()),c=Object(S.a)(s,2),l=c[0],o=c[1],m=Object(n.useState)(),u=Object(S.a)(m,2),d=u[0],E=u[1],f=Object(i.g)(),p=B.object().shape({login:B.object().shape({email:B.string().email("Email must be valid").required("Email is required"),password:B.string().required("Password is required")})});return r.a.createElement(L.d,{initialValues:{login:{email:"",password:""}},validationSchema:p,onSubmit:function(e,a){var n,r,s,c;return A.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n=e.login,r=n.email,s=n.password,(c=a.setSubmitting)(!0),l.next=5,A.a.awrap(z.a.post("/users/login",{email:r,password:s}).then((function(e){var a=e.data,n=a.success,s=a.token,l=a.user;if(n){var i=l||"",m=i.security_questions,u=i.address,d=i.profileImg;return m=!(!Array.isArray(m)||!m.length),u=!!u,d=!!d,o(!0),E("Logged in successfully"),c(!1),t(s,r,m,u,d),m&&u&&d?setTimeout((function(){return f.push("/dashboard")}),500):setTimeout((function(){return f.push("/setup")}),500),!0}return o(!1),E("Email or password is incorrect"),c(!1),!1})));case 5:case"end":return l.stop()}}))}},(function(e){var t=e.isSubmitting,n=e.resetForm;return r.a.createElement(L.c,null,r.a.createElement(k.a,{className:"mb-2"},r.a.createElement(T.a,{xs:"12",md:{span:10,offset:1}},d?l?r.a.createElement(R.a,{className:"mb-2 form-success text-center"},d):r.a.createElement(R.a,{className:"mb-2 form-error text-center"},d):null,r.a.createElement(U.a,null,r.a.createElement(L.a,{name:"login.email"},(function(e){return r.a.createElement(R.a,{className:"mb-1 form-error text-center",variant:"danger"},e)})),r.a.createElement(_.a,{className:"login-inputs home-inputs"},r.a.createElement(_.a.Prepend,null,r.a.createElement(_.a.Text,null,r.a.createElement("i",{className:"fas fa-at"}))),r.a.createElement(L.b,{className:"form-control",disabled:t,type:"email",name:"login.email",placeholder:"Enter email..."}))),r.a.createElement(U.a,{className:"mb-3"},r.a.createElement(L.a,{name:"login.password"},(function(e){return r.a.createElement(R.a,{className:"mb-1 form-error text-center",variant:"danger"},e)})),r.a.createElement(_.a,{className:"login-inputs home-inputs"},r.a.createElement(_.a.Prepend,null,r.a.createElement(_.a.Text,null,r.a.createElement("i",{className:"fas fa-key"}))),r.a.createElement(L.b,{className:"form-control",disabled:t,type:"password",name:"login.password",placeholder:"Enter password..."}))))),r.a.createElement(U.a,{className:"m-0"},r.a.createElement(q.a,{className:"login-buttons home-buttons"},r.a.createElement(I.a,{type:"submit",disabled:t},"LOGIN"),r.a.createElement(I.a,{disabled:t,onClick:function(){a(1),n(),E(),o()}},"SIGNUP \xa0",r.a.createElement("i",{className:"fas fa-arrow-right"})))))}))}function F(e){var a=e.container,t=e.setContainer,n=e.authenticate,s=e.checkUser;return r.a.createElement("div",{className:1===a?"login-container home-cards hide-login":0===a?"login-container home-cards show-login":"login-container home-cards"},r.a.createElement(k.a,{className:"text-center mt-4 mb-2"},r.a.createElement(T.a,{xs:"12"},r.a.createElement("h1",null,"LOGIN"))),r.a.createElement(k.a,null,r.a.createElement(T.a,{xs:"12"},r.a.createElement(G,{setContainer:t,authenticate:n,checkUser:s}))))}t(323);function H(e){var a=e.setContainer,t=e.authenticate,s=Object(n.useState)(),c=Object(S.a)(s,2),l=c[0],o=c[1],m=Object(n.useState)(),u=Object(S.a)(m,2),d=u[0],E=u[1],f=Object(i.g)(),p=B.object().shape({register:B.object().shape({email:B.string().trim().required("Email is required").email("Email must be valid"),password:B.string().required("Password is required").min(6,"Password must be longer than 6 characters").max(12,"Password must be shorter than 12 characters").matches(/^(?=.*[a-z])/,"Password must contain at least 1 lowercase letter").matches(/^(?=.*[A-Z])/,"Password must contain at least 1 uppercase letter").matches(/^(?=.*[0-9])/,"Password must contain at least 1 number"),passwordConf:B.string().required("Please re-enter password").oneOf([B.ref("password")],"Passwords must match"),phone:B.string().required("Phone number is required").min(10,"Phone number is invalid").max(11,"Phone number is invalid").matches(/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,"Phone number is invalid"),dob:B.string().required("DOB is required").matches(/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/,"DOB is invalid")})});return r.a.createElement(L.d,{initialValues:{register:{email:"",password:"",passwordConf:"",phone:"",dob:""}},validationSchema:p,onSubmit:function(e,a){var n=e.register,r=n.email,s=n.password,c=n.passwordConf,l=n.phone,i=n.dob,m=a.setSubmitting;z.a.post("/users/register",{email:r,password:s,passwordConf:c,phone:l,dob:i}).then((function(e){var a=e.data,n=a.success,s=a.msg,c=a.token;return m(!0),n?(o(!0),E(s),t(c,r),setTimeout(f.push("/setup"),500),!0):(o(!1),E(s),m(!1),!1)})),m(!1)}},(function(e){var t=e.isSubmitting,n=e.resetForm;return r.a.createElement(L.c,null,r.a.createElement(k.a,null,r.a.createElement(T.a,{xs:{span:10,offset:1}},d?l?r.a.createElement(R.a,{className:"mb-2 form-success text-center"},d):r.a.createElement(R.a,{className:"mb-2 form-error text-center"},d):null,r.a.createElement(U.a,null,r.a.createElement(L.a,{name:"register.email"},(function(e){return r.a.createElement(R.a,{className:"mb-1 form-error text-center",variant:"danger"},e)})),r.a.createElement(_.a,{className:"register-inputs home-inputs"},r.a.createElement(_.a.Prepend,null,r.a.createElement(_.a.Text,null,r.a.createElement("i",{className:"fas fa-at"}))),r.a.createElement(L.b,{className:"form-control",disabled:t,type:"email",name:"register.email",placeholder:"Enter email..."}))),r.a.createElement(U.a,{className:"mb-3"},r.a.createElement(L.a,{name:"register.password"},(function(e){return r.a.createElement(R.a,{className:"mb-1 form-error text-center",variant:"danger"},e)})),r.a.createElement(_.a,{className:"login-inputs home-inputs"},r.a.createElement(_.a.Prepend,null,r.a.createElement(_.a.Text,null,r.a.createElement("i",{className:"fas fa-key"}))),r.a.createElement(L.b,{className:"form-control",disabled:t,type:"password",name:"register.password",placeholder:"Enter password..."}))),r.a.createElement(U.a,{className:"mb-4"},r.a.createElement(L.a,{name:"register.passwordConf"},(function(e){return r.a.createElement(R.a,{className:"mb-1 form-error text-center",variant:"danger"},e)})),r.a.createElement(_.a,{className:"login-inputs home-inputs"},r.a.createElement(_.a.Prepend,null,r.a.createElement(_.a.Text,null,r.a.createElement("i",{className:"fas fa-shield-alt"}))),r.a.createElement(L.b,{className:"form-control",disabled:t,type:"password",name:"register.passwordConf",placeholder:"Re-enter password..."}))),r.a.createElement(U.a,{className:"mb-4"},r.a.createElement(L.a,{name:"register.phone"},(function(e){return r.a.createElement(R.a,{className:"mb-1 form-error text-center",variant:"danger"},e)})),r.a.createElement(_.a,{className:"login-inputs home-inputs"},r.a.createElement(_.a.Prepend,null,r.a.createElement(_.a.Text,null,r.a.createElement("i",{className:"fas fa-phone"}))),r.a.createElement(L.b,{className:"form-control",disabled:t,type:"tel",name:"register.phone",placeholder:"Enter phone number..."}))),r.a.createElement(U.a,{className:"mb-4"},r.a.createElement(L.a,{name:"register.dob"},(function(e){return r.a.createElement(R.a,{className:"mb-1 form-error text-center",variant:"danger"},e)})),r.a.createElement(_.a,{className:"login-inputs home-inputs"},r.a.createElement(_.a.Prepend,null,r.a.createElement(_.a.Text,null,r.a.createElement("i",{className:"fas fa-birthday-cake"}))),r.a.createElement(L.b,{className:"form-control",disabled:t,type:"text",onFocus:function(e){return e.target.type="date"},name:"register.dob",placeholder:"Enter DOB...",min:"1950-01-01",max:"2005-12-31"}))))),r.a.createElement(U.a,{className:"m-0"},r.a.createElement(q.a,{className:"register-buttons home-buttons"},r.a.createElement(I.a,{disabled:t,onClick:function(){a(0),n(),E(),o()}},r.a.createElement("i",{className:"fas fa-arrow-left"})," \xa0 BACK"),r.a.createElement(I.a,{type:"submit",disabled:t},"SUBMIT"))))}))}function M(e){var a=e.container,t=e.setContainer,n=e.authenticate;return r.a.createElement("div",{className:1===a?"register-container home-cards show-register":0===a?"register-container home-cards hide-register":"register-container home-cards"},r.a.createElement(k.a,{className:"text-center mt-4 mb-4"},r.a.createElement(T.a,{xs:"12"},r.a.createElement("h1",null,"REGISTER"))),r.a.createElement(k.a,null,r.a.createElement(T.a,{xs:"12"},r.a.createElement(H,{setContainer:t,authenticate:n}))))}var V=t(101),J=Object(o.b)(null,(function(e){return{authenticate:function(a,t,n,r,s){return e(Object(V.a)(a,t,n,r,s))}}}))((function(e){var a=e.authenticate,t=Object(n.useState)(2),s=Object(S.a)(t,2),c=s[0],l=s[1];return r.a.createElement(P.a,null,r.a.createElement(k.a,{className:"mt-xs-2 mt-4"},r.a.createElement(T.a,{xs:{span:10,offset:1},md:{span:4,offset:4}},r.a.createElement(F,{container:c,setContainer:l,authenticate:a}),r.a.createElement(M,{container:c,setContainer:l,authenticate:a}))))})),X=t(163);function K(e){var a=e.children,t=Object(X.a)(e,["children"]),n=Object(o.d)((function(e){return e.user.isAuthenticated})),s=Object(o.d)((function(e){return e.user.token})),c=Object(o.d)((function(e){return e.user.email})),l=Object(o.d)((function(e){return e.user.hasSecurity})),m=Object(o.d)((function(e){return e.user.hasAddress})),u=Object(o.d)((function(e){return e.user.hasProfilePic})),d=Object(i.h)();return r.a.createElement(i.b,Object.assign({},t,{render:function(){return n&&s&&c?l&&m&&u?a:"/setup"===d.pathname?a:r.a.createElement(i.a,{to:"/setup"}):r.a.createElement(i.a,{to:"/"})}}))}var Y=r.a.lazy((function(){return Promise.all([t.e(4),t.e(7)]).then(t.bind(null,348))})),Z=r.a.lazy((function(){return Promise.all([t.e(3),t.e(6)]).then(t.bind(null,349))})),$=r.a.lazy((function(){return t.e(10).then(t.bind(null,350))}));c.a.render(r.a.createElement((function(){return r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:v},r.a.createElement(x.a,{loading:null,persistor:y},r.a.createElement(l.a,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/"},r.a.createElement(J,null)),r.a.createElement(K,{path:"/dashboard"},r.a.createElement(Y,null)),r.a.createElement(K,{path:"/setup"},r.a.createElement($,null)),r.a.createElement(K,{path:"/settings"},r.a.createElement(Z,null))))))))}),null),document.getElementById("root"))},69:function(e,a,t){"use strict";t.d(a,"b",(function(){return n})),t.d(a,"a",(function(){return r}));var n=function(){return!0},r={url:n()?"https://jetcakes-project.herokuapp.com":"http://localhost:3001"}}},[[164,1,2]]]);