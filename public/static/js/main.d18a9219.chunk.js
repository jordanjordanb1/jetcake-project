(this["webpackJsonpjetcake-project"]=this["webpackJsonpjetcake-project"]||[]).push([[1],{164:function(e,a,t){e.exports=t(325)},168:function(e,a,t){},169:function(e,a,t){},175:function(e,a,t){},176:function(e,a,t){},21:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"e",(function(){return r})),t.d(a,"c",(function(){return s})),t.d(a,"d",(function(){return c})),t.d(a,"b",(function(){return l}));var n="AUTHENTICATE_USER",r="SET_HAS_SECURITY",s="SET_HAS_ADDRESS",c="SET_HAS_PROFILE_PIC",l="LOG_OUT"},323:function(e,a,t){},324:function(e,a,t){},325:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(46),c=t.n(s),l=(t(168),t(48)),i=t(20),o=(t(169),t(13)),m=t(73),u=t(24),d=t(97),E=t(156),f=t.n(E),p=t(69),b=t(94),h=t(157),g=t.n(h),N=t(47),v=t(21),O={key:"root",storage:f.a},j=Object(d.a)(O,Object(u.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isAuthenticated:!1,token:null,email:null,hasAddress:null,hasSecurity:null,hasProfilePic:null},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case v.a:return Object(N.a)({},e,{isAuthenticated:!0,token:a.payload.token,email:a.payload.email});case v.e:return Object(N.a)({},e,{hasSecurity:a.payload});case v.c:return Object(N.a)({},e,{hasAddress:a.payload});case v.d:return Object(N.a)({},e,{hasProfilePic:a.payload});case v.b:return Object(N.a)({},e,{isAuthenticated:!1,token:null,email:null,hasAddress:null,hasSecurity:null,hasProfilePic:null});default:return e}}})),w=function(){var e=[];e=Object(p.b)()?[].concat(Object(m.a)(e),[b.a]):[].concat(Object(m.a)(e),[b.a,g.a]);var a=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d;return Object(u.e)(j,a(u.a.apply(void 0,Object(m.a)(e))))}(),y=Object(d.b)(w),x=t(158),P=t(30),S=t(99),k=t(18),T=t(17),C=(t(175),t(176),t(92)),A=t.n(C),_=t(4),q=t(67),I=t(45),U=t(23),R=t(15),B=t(7),D=t(11),L=t(36),z=t.n(L),G=t(53);function F(e){var a=e.setContainer,t=(e.checkUser,Object(n.useState)()),s=Object(P.a)(t,2),c=s[0],l=s[1],m=Object(n.useState)(),u=Object(P.a)(m,2),d=u[0],E=u[1],f=Object(i.g)(),p=Object(o.b)(),b=D.object().shape({login:D.object().shape({email:D.string().email("Email must be valid").required("Email is required"),password:D.string().required("Password is required")})});return r.a.createElement(B.d,{initialValues:{login:{email:"",password:""}},validationSchema:b,onSubmit:function(e,a){var t,n,r,s;return A.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.login,n=t.email,r=t.password,(s=a.setSubmitting)(!0),c.next=5,A.a.awrap(z.a.post("/users/login",{email:n,password:r}).then((function(e){var a=e.data,t=a.success,r=a.token,c=a.user;if(t){var i=c||"",o=i.security_questions,m=i.address,u=i.profileImg;return o=!(!Array.isArray(o)||!o.length),m=!!m,u=!!u,l(!0),E("Logged in successfully"),s(!1),p(Object(G.a)(r,n,o,m,u)),o&&m&&u?setTimeout((function(){return f.push("/dashboard")}),500):setTimeout((function(){return f.push("/setup")}),500),!0}return l(!1),E("Email or password is incorrect"),s(!1),!1})));case 5:case"end":return c.stop()}}))}},(function(e){var t=e.isSubmitting,n=e.resetForm;return r.a.createElement(B.c,null,r.a.createElement(k.a,{className:"mb-2"},r.a.createElement(T.a,{xs:"12",md:{span:10,offset:1}},d?c?r.a.createElement(R.a,{className:"mb-2 form-success text-center"},d):r.a.createElement(R.a,{className:"mb-2 form-error text-center"},d):null,r.a.createElement(U.a,null,r.a.createElement(B.a,{name:"login.email"},(function(e){return r.a.createElement(R.a,{className:"mb-1 form-error text-center",variant:"danger"},e)})),r.a.createElement(_.a,{className:"login-inputs home-inputs"},r.a.createElement(_.a.Prepend,null,r.a.createElement(_.a.Text,null,r.a.createElement("i",{className:"fas fa-at"}))),r.a.createElement(B.b,{className:"form-control",disabled:t,type:"email",name:"login.email",placeholder:"Enter email..."}))),r.a.createElement(U.a,{className:"mb-3"},r.a.createElement(B.a,{name:"login.password"},(function(e){return r.a.createElement(R.a,{className:"mb-1 form-error text-center",variant:"danger"},e)})),r.a.createElement(_.a,{className:"login-inputs home-inputs"},r.a.createElement(_.a.Prepend,null,r.a.createElement(_.a.Text,null,r.a.createElement("i",{className:"fas fa-key"}))),r.a.createElement(B.b,{className:"form-control",disabled:t,type:"password",name:"login.password",placeholder:"Enter password..."}))))),r.a.createElement(U.a,{className:"m-0"},r.a.createElement(q.a,{className:"login-buttons home-buttons"},r.a.createElement(I.a,{type:"submit",disabled:t},"LOGIN"),r.a.createElement(I.a,{disabled:t,onClick:function(){a(1),n(),E(),l()}},"SIGNUP \xa0",r.a.createElement("i",{className:"fas fa-arrow-right"})))))}))}function H(e){var a=e.container,t=e.setContainer,n=e.checkUser,s="login-container card-containers home-cards";return r.a.createElement("div",{className:1===a?"".concat(s," hide-login"):0===a?"".concat(s," show-login"):s},r.a.createElement(k.a,{className:"text-center mt-4 mb-2"},r.a.createElement(T.a,{xs:"12"},r.a.createElement("h1",null,"LOGIN"))),r.a.createElement(k.a,null,r.a.createElement(T.a,{xs:"12"},r.a.createElement(F,{setContainer:t,checkUser:n}))))}t(323);function V(e){var a=e.setContainer,t=Object(n.useState)(),s=Object(P.a)(t,2),c=s[0],l=s[1],m=Object(n.useState)(),u=Object(P.a)(m,2),d=u[0],E=u[1],f=Object(i.g)(),p=Object(o.b)(),b=D.object().shape({register:D.object().shape({email:D.string().trim().required("Email is required").email("Email must be valid"),password:D.string().required("Password is required").min(6,"Password must be longer than 6 characters").max(12,"Password must be shorter than 12 characters").matches(/^(?=.*[a-z])/,"Password must contain at least 1 lowercase letter").matches(/^(?=.*[A-Z])/,"Password must contain at least 1 uppercase letter").matches(/^(?=.*[0-9])/,"Password must contain at least 1 number"),passwordConf:D.string().required("Please re-enter password").oneOf([D.ref("password")],"Passwords must match"),phone:D.string().required("Phone number is required").min(10,"Phone number is invalid").max(11,"Phone number is invalid").matches(/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,"Phone number is invalid"),dob:D.string().required("DOB is required").matches(/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/,"DOB is invalid")})});return r.a.createElement(B.d,{initialValues:{register:{email:"",password:"",passwordConf:"",phone:"",dob:""}},validationSchema:b,onSubmit:function(e,a){var t=e.register,n=t.email,r=t.password,s=t.passwordConf,c=t.phone,i=t.dob,o=a.setSubmitting;z.a.post("/users/register",{email:n,password:r,passwordConf:s,phone:c,dob:i}).then((function(e){var a=e.data,t=a.success,r=a.msg,s=a.token;return o(!0),t?(l(!0),E(r),p(Object(G.a)(s,n)),setTimeout(f.push("/setup"),500),!0):(l(!1),E(r),o(!1),!1)})),o(!1)}},(function(e){var t=e.isSubmitting,n=e.resetForm;return r.a.createElement(B.c,null,r.a.createElement(k.a,null,r.a.createElement(T.a,{xs:{span:10,offset:1}},d?c?r.a.createElement(R.a,{className:"mb-2 form-success text-center"},d):r.a.createElement(R.a,{className:"mb-2 form-error text-center"},d):null,r.a.createElement(U.a,null,r.a.createElement(B.a,{name:"register.email"},(function(e){return r.a.createElement(R.a,{className:"mb-1 form-error text-center",variant:"danger"},e)})),r.a.createElement(_.a,{className:"register-inputs home-inputs"},r.a.createElement(_.a.Prepend,null,r.a.createElement(_.a.Text,null,r.a.createElement("i",{className:"fas fa-at"}))),r.a.createElement(B.b,{className:"form-control",disabled:t,type:"email",name:"register.email",placeholder:"Enter email..."}))),r.a.createElement(U.a,{className:"mb-3"},r.a.createElement(B.a,{name:"register.password"},(function(e){return r.a.createElement(R.a,{className:"mb-1 form-error text-center",variant:"danger"},e)})),r.a.createElement(_.a,{className:"login-inputs home-inputs"},r.a.createElement(_.a.Prepend,null,r.a.createElement(_.a.Text,null,r.a.createElement("i",{className:"fas fa-key"}))),r.a.createElement(B.b,{className:"form-control",disabled:t,type:"password",name:"register.password",placeholder:"Enter password..."}))),r.a.createElement(U.a,{className:"mb-4"},r.a.createElement(B.a,{name:"register.passwordConf"},(function(e){return r.a.createElement(R.a,{className:"mb-1 form-error text-center",variant:"danger"},e)})),r.a.createElement(_.a,{className:"login-inputs home-inputs"},r.a.createElement(_.a.Prepend,null,r.a.createElement(_.a.Text,null,r.a.createElement("i",{className:"fas fa-shield-alt"}))),r.a.createElement(B.b,{className:"form-control",disabled:t,type:"password",name:"register.passwordConf",placeholder:"Re-enter password..."}))),r.a.createElement(U.a,{className:"mb-4"},r.a.createElement(B.a,{name:"register.phone"},(function(e){return r.a.createElement(R.a,{className:"mb-1 form-error text-center",variant:"danger"},e)})),r.a.createElement(_.a,{className:"login-inputs home-inputs"},r.a.createElement(_.a.Prepend,null,r.a.createElement(_.a.Text,null,r.a.createElement("i",{className:"fas fa-phone"}))),r.a.createElement(B.b,{className:"form-control",disabled:t,type:"tel",name:"register.phone",placeholder:"Enter phone number..."}))),r.a.createElement(U.a,{className:"mb-4"},r.a.createElement(B.a,{name:"register.dob"},(function(e){return r.a.createElement(R.a,{className:"mb-1 form-error text-center",variant:"danger"},e)})),r.a.createElement(_.a,{className:"login-inputs home-inputs"},r.a.createElement(_.a.Prepend,null,r.a.createElement(_.a.Text,null,r.a.createElement("i",{className:"fas fa-birthday-cake"}))),r.a.createElement(B.b,{className:"form-control",disabled:t,type:"text",onFocus:function(e){return e.target.type="date"},name:"register.dob",placeholder:"Enter DOB...",min:"1950-01-01",max:"2005-12-31"}))))),r.a.createElement(U.a,{className:"m-0"},r.a.createElement(q.a,{className:"register-buttons home-buttons"},r.a.createElement(I.a,{disabled:t,onClick:function(){a(0),n(),E(),l()}},r.a.createElement("i",{className:"fas fa-arrow-left"})," \xa0 BACK"),r.a.createElement(I.a,{type:"submit",disabled:t},"SUBMIT"))))}))}function J(e){var a=e.container,t=e.setContainer,n="register-container card-containers home-cards";return r.a.createElement("div",{className:1===a?"".concat(n," show-register"):0===a?"".concat(n," hide-register"):n},r.a.createElement(k.a,{className:"text-center mt-4 mb-4"},r.a.createElement(T.a,{xs:"12"},r.a.createElement("h1",null,"REGISTER"))),r.a.createElement(k.a,null,r.a.createElement(T.a,{xs:"12"},r.a.createElement(V,{setContainer:t}))))}function M(){var e=Object(n.useState)(2),a=Object(P.a)(e,2),t=a[0],s=a[1];return r.a.createElement(S.a,null,r.a.createElement(k.a,{className:"mt-xs-2 mt-4"},r.a.createElement(T.a,{xs:{span:10,offset:1},md:{span:4,offset:4}},r.a.createElement(H,{container:t,setContainer:s}),r.a.createElement(J,{container:t,setContainer:s}))))}var X=t(163);function K(e){var a=e.children,t=Object(X.a)(e,["children"]),n=Object(o.c)((function(e){return e.user.isAuthenticated})),s=Object(o.c)((function(e){return e.user.token})),c=Object(o.c)((function(e){return e.user.email})),l=Object(o.c)((function(e){return e.user.hasSecurity})),m=Object(o.c)((function(e){return e.user.hasAddress})),u=Object(o.c)((function(e){return e.user.hasProfilePic})),d=Object(i.h)();return r.a.createElement(i.b,Object.assign({},t,{render:function(){return n&&s&&c?l&&m&&u?a:"/setup"===d.pathname?a:r.a.createElement(i.a,{to:"/setup"}):r.a.createElement(i.a,{to:"/"})}}))}t(324);function Y(){return r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"centered-container"},r.a.createElement("div",{className:"lds-ellipsis"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))))}var Z=r.a.lazy((function(){return Promise.all([t.e(0),t.e(5)]).then(t.bind(null,352))})),$=r.a.lazy((function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,350))})),Q=r.a.lazy((function(){return t.e(9).then(t.bind(null,351))}));c.a.render(r.a.createElement((function(){return r.a.createElement(o.a,{store:w},r.a.createElement(x.a,{loading:null,persistor:y},r.a.createElement(l.a,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement(Y,null)},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/"},r.a.createElement(M,null)),r.a.createElement(K,{path:"/dashboard"},r.a.createElement(Z,null)),r.a.createElement(K,{path:"/setup"},r.a.createElement(Q,null)),r.a.createElement(K,{path:"/settings"},r.a.createElement($,null)))))))}),null),document.getElementById("root"))},53:function(e,a,t){"use strict";t.d(a,"e",(function(){return l})),t.d(a,"c",(function(){return i})),t.d(a,"d",(function(){return o})),t.d(a,"a",(function(){return m})),t.d(a,"b",(function(){return u}));var n=t(21),r=t(36),s=t.n(r),c=t(69);s.a.defaults.baseURL=c.a.url;var l=function(e){return{type:n.e,payload:e}},i=function(e){return{type:n.c,payload:e}},o=function(e){return{type:n.d,payload:e}},m=function(e,a,t,r,s){return function(c){c({type:n.a,payload:{token:e,email:a}}),c(l(!!t)),c(i(!!r)),c(o(!!s))}},u=function(){return function(e,a){var t=a().user.token;console.log("logging out"),s.a.get("/users/logout",{headers:{Authorization:"Bearer ".concat(t)}}).then((function(a){e({type:n.b})}))}}},69:function(e,a,t){"use strict";t.d(a,"b",(function(){return n})),t.d(a,"a",(function(){return r}));var n=function(){return!1},r={url:n()?"https://jetcakes-project.herokuapp.com":"http://localhost:3001"}}},[[164,2,3]]]);